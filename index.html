<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Discord Inspector — Server & User (Static)</title>
<link rel="icon" href="https://discord.com/assets/847541504914fd33810e70a0d6341b83.ico" />
<style>
  @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap');
  :root{
    --bg:#0f1113; --card:#1e1f22; --muted:#b9bbbe; --accent:#7289da; --good:#43b581; --danger:#f04747;
  }
  *{box-sizing:border-box}
  body{font-family:'Inter',system-ui,Segoe UI,Roboto,Arial; margin:0; background:var(--bg); color:#e6e7e8; min-height:100vh; display:flex; flex-direction:column; align-items:center; padding:28px;}
  .wrap{max-width:980px; width:100%;}
  header{display:flex; align-items:center; gap:12px; margin-bottom:18px; justify-content:space-between;}
  h1{margin:0; color:var(--accent); font-size:1.25rem;}
  .grid{display:grid; grid-template-columns:1fr 420px; gap:18px;}
  @media (max-width:920px){ .grid{grid-template-columns:1fr; } }
  .card{background:var(--card); border-radius:12px; padding:16px; box-shadow:0 8px 24px rgba(0,0,0,0.6); border:1px solid rgba(255,255,255,0.02);}
  .input-row{display:flex; gap:10px; margin-bottom:12px;}
  input[type="text"], input[type="url"]{flex:1; padding:10px 12px; border-radius:8px; border:0; background:#2a2a2b; color:inherit;}
  button{background:linear-gradient(180deg,var(--accent), #5a62d8); color:white; border:0; padding:10px 14px; border-radius:8px; cursor:pointer; font-weight:700;}
  button:active{transform:translateY(1px)}
  .muted{color:var(--muted); font-size:0.9rem;}
  .label{color:var(--muted); font-weight:700; min-width:150px;}
  .row{display:flex; gap:12px; align-items:center; margin-bottom:8px; flex-wrap:wrap;}
  .value{color:var(--good); font-weight:700;}
  .link a{color:var(--good); text-decoration:none;}
  .desc{color:#dcdfe2; margin-top:6px; white-space:pre-wrap;}
  .preview{display:flex; gap:12px; align-items:center;}
  img.avatar{width:96px; height:96px; border-radius:16px; object-fit:cover; background:#262626;}
  img.banner{width:100%; height:120px; object-fit:cover; border-radius:10px; background:#131313; margin-top:10px;}
  footer{margin-top:18px; text-align:center; color:var(--muted); font-size:0.9rem;}
  .note{background:#151518; border-radius:8px; padding:10px; color:var(--muted); font-size:0.95rem;}
  .sep{height:1px; background:#2f3136; margin:12px 0; border-radius:2px;}
</style>
</head>
<body>
  <div class="wrap">
    <header>
      <h1>Discord Inspector</h1>
      <div class="muted">Made by <a href="https://discord.com/users/1252981295454224390" target="_blank" rel="noopener noreferrer" style="color:var(--accent);text-decoration:none;">katislunatic</a></div>
    </header>

    <div class="grid">
      <!-- Left column: Server Invite Inspector -->
      <section class="card" aria-labelledby="server-title">
        <h2 id="server-title" style="margin-top:0; color:var(--accent);">Server Invite Inspector</h2>

        <div class="input-row">
          <input id="inviteInput" type="text" placeholder="Invite code or URL (e.g. discord.gg/abcDef)" />
          <button id="fetchInviteBtn">Fetch</button>
        </div>

        <div id="serverResult" class="muted">Enter an invite code and press Fetch. This uses Discord's public invite API and works on GitHub Pages.</div>

        <div id="serverInfo" style="margin-top:12px;"></div>
      </section>

      <!-- Right column: User Lookup (static-only) -->
      <aside class="card" aria-labelledby="user-title">
        <h2 id="user-title" style="margin-top:0; color:var(--accent);">User Lookup (static)</h2>

        <p class="muted">Paste a Discord <strong>User ID</strong> to compute account creation time. For avatar/banner preview, paste a direct image URL (CDN link) below.</p>

        <div class="input-row">
          <input id="userIdInput" type="text" placeholder="Discord User ID (snowflake)" />
          <button id="calcUserBtn">Show</button>
        </div>

        <div class="row">
          <div class="label">Avatar URL (optional)</div>
          <input id="avatarUrl" type="url" placeholder="https://cdn.discordapp.com/avatars/USERID/HASH.png (optional)" />
        </div>

        <div class="row">
          <div class="label">Banner URL (optional)</div>
          <input id="bannerUrl" type="url" placeholder="Direct banner image URL (optional)" />
        </div>

        <div id="userResult" style="margin-top:12px;"></div>

        <div class="sep"></div>

        <div class="note">
          <strong>Important:</strong> GitHub Pages is static. To fetch username, badges, banner color or other private fields you need a bot token or server backend. If you want full user info (username, badges, banner color), I can help add a small server that keeps a bot token safe.
        </div>
      </aside>
    </div>

    <footer>
      <div class="muted">Tip: you can copy CDN avatar links from bots, or add a server-side endpoint to fetch private user data if you later want more detail.</div>
      <div style="margin-top:8px;"><a href="https://discord.com/users/1252981295454224390" target="_blank" rel="noopener noreferrer" style="color:var(--accent); text-decoration:none;">Made by katislunatic</a></div>
    </footer>
  </div>

<script>
/* ---------- Helpers ---------- */
const $ = (id)=>document.getElementById(id);
const safe = (v, d='N/A') => (v===undefined || v===null ? d : v);

// Convert snowflake -> timestamp -> human date
function snowflakeToDate(snowflake){
  try{
    // BigInt shift technique
    const id = BigInt(snowflake);
    const discordEpoch = 1420070400000n; // Jan 1, 2015
    const timestamp = Number((id >> 22n) + discordEpoch);
    const d = new Date(timestamp);
    return d.toLocaleString();
  }catch(e){
    return 'Invalid ID';
  }
}

/* ---------- Server Invite Inspector (public API) ---------- */
async function fetchInvite(){
  const raw = $('inviteInput').value.trim();
  const serverResult = $('serverResult');
  const serverInfo = $('serverInfo');
  serverInfo.innerHTML = '';
  if(!raw){
    serverResult.innerHTML = '<span style="color:var(--danger);">Enter an invite code or URL.</span>';
    return;
  }
  // normalize code
  const code = raw.replace(/^(?:https?:\/\/)?(?:www\.)?(?:discord\.gg|discordapp\.com\/invite)\/?/i, '');
  serverResult.innerHTML = '<span class="muted">Loading invite…</span>';
  try{
    const res = await fetch(`https://discord.com/api/invites/${encodeURIComponent(code)}?with_counts=true`);
    if(!res.ok) throw new Error(`Invite not found (status ${res.status})`);
    const data = await res.json();
    const g = data.guild || {};
    const icon = g.icon ? `https://cdn.discordapp.com/icons/${g.id}/${g.icon}.png?size=256` : '';
    const banner = g.banner ? `https://cdn.discordapp.com/banners/${g.id}/${g.banner}.png?size=1024` : '';
    // minimal display (safe and static)
    serverInfo.innerHTML = `
      <div style="display:flex; gap:12px; align-items:flex-start;">
        <div style="min-width:120px;">
          <img src="${icon || 'https://via.placeholder.com/128?text=No+Icon'}" alt="icon" style="width:112px;height:112px;border-radius:12px;object-fit:cover;background:#222" />
          <div class="muted" style="margin-top:8px">${g.id ? 'ID: '+g.id : ''}</div>
        </div>
        <div style="flex:1;">
          <div class="row"><div class="label">Server</div><div class="value">${safe(g.name,'Unknown')}</div></div>
          <div class="row"><div class="label">Members</div><div class="value">${safe(data.approximate_member_count,'N/A')}</div></div>
          <div class="row"><div class="label">Online</div><div class="value">${safe(data.approximate_presence_count,'N/A')}</div></div>
          <div class="row"><div class="label">Created</div><div class="value">${g.id ? snowflakeToDate(g.id) : 'Unknown'}</div></div>
          <div class="row"><div class="label">Vanity</div><div class="value">${safe(data.code ? 'discord.gg/'+data.code : (g.vanity_url_code ? 'discord.gg/'+g.vanity_url_code : 'None'))}</div></div>
          <div class="desc">${g.description ? g.description : ''}</div>
        </div>
      </div>
    `;
    if(banner){
      const img = document.createElement('img');
      img.src = banner;
      img.className = 'banner';
      img.alt = 'banner';
      serverInfo.appendChild(img);
    }
    serverResult.innerHTML = '';
  }catch(err){
    serverResult.innerHTML = `<span style="color:var(--danger)">Error: ${err.message}</span>`;
  }
}
$('fetchInviteBtn').addEventListener('click', fetchInvite);
$('inviteInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter') fetchInvite(); });

/* ---------- User Lookup (static-only) ---------- */
function showUser(){
  const id = $('userIdInput').value.trim();
  const avatar = $('avatarUrl').value.trim();
  const banner = $('bannerUrl').value.trim();
  const out = $('userResult');
  out.innerHTML = '';
  if(!id){
    out.innerHTML = '<div class="muted" style="color:var(--danger)">Enter a Discord user ID.</div>';
    return;
  }
  const created = snowflakeToDate(id);
  // Build preview card
  out.innerHTML = `
    <div style="display:flex; gap:12px; align-items:center;">
      <div style="min-width:96px;">
        <img class="avatar" src="${avatar || 'https://via.placeholder.com/96?text=Avatar'}" alt="avatar" />
      </div>
      <div style="flex:1;">
        <div class="row"><div class="label">User ID</div><div class="value">${id}</div></div>
        <div class="row"><div class="label">Created</div><div class="value">${created}</div></div>
        <div class="row"><div class="label">Username</div><div class="value muted">(username can't be fetched on static pages)</div></div>
      </div>
    </div>
  `;
  if(banner){
    const img = document.createElement('img');
    img.src = banner;
    img.className = 'banner';
    img.alt = 'banner';
    out.appendChild(img);
  }
}
$('calcUserBtn').addEventListener('click', showUser);
$('userIdInput').addEventListener('keydown', (e)=>{ if(e.key==='Enter') showUser(); });

</script>
</body>
</html>
